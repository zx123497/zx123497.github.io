{"version":3,"sources":["assets/hana.png","assets/family.png","assets/mise.png","assets/title.png","pages/Hanabi.js"],"names":["useStyles","makeStyles","root","width","height","justifyContent","alignItems","display","flexDirection","backgroundColor","overflow","chat","backdropFilter","imageDefault","WebkitUserSelect","WebkitUserDrag","socket","io","connect","forceNew","getRandomColor","color","i","Math","floor","random","Home","props","useState","text","setText","x","y","cordinate","setCordinate","messages","setMessages","colors","useEffect","console","log","emit","username","match","params","id","roomname","disconnect","on","data","temp","push","userId","everyonefire","cordin","messagesEndRef","useRef","fx","current","scrollIntoView","behavior","block","inline","classes","sendData","ans","motion","div","initial","opacity","animate","transition","duration","exit","className","onClick","onMouseMove","evt","pageX","pageY","style","flex","src","Title","filter","alt","Hana","position","bottom","right","Mise","left","Family","padding","borderRadius","margin","borderColor","lineHeight","autoHide","autoHeight","renderTrackVertical","top","map","row","ref","Input","value","placeholder","inputProps","onChange","target","onKeyPress","key","Button","marginLeft","border","marginTop"],"mappings":"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","file":"static/js/8.f2f7f548.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/hana.8a690e46.png\";","export default __webpack_public_path__ + \"static/media/family.7c5d7dfd.png\";","export default __webpack_public_path__ + \"static/media/mise.ae36ef33.png\";","export default __webpack_public_path__ + \"static/media/title.bd28112d.png\";","/* eslint-disable react/jsx-key */\n/* eslint-disable max-len */\n/* eslint-disable react/prop-types */\n/* eslint-disable require-jsdoc */\nimport React, { useState, useEffect, useRef } from 'react'\nimport Hana from '../assets/hana.png'\nimport Title from '../assets/title.png'\nimport Family from '../assets/family.png'\nimport Mise from '../assets/mise.png'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport { io } from 'socket.io-client'\nimport FilterVintageIcon from '@material-ui/icons/FilterVintage'\nimport Input from '@material-ui/core/Input'\nimport fx from 'fireworks'\nimport { Scrollbars } from 'react-custom-scrollbars-2'\nimport { motion } from 'framer-motion'\nconst useStyles = makeStyles({\n    root: {\n        width: '100%',\n        height: '100vh',\n        justifyContent: 'center',\n        alignItems: 'center',\n        display: 'flex',\n        flexDirection: 'column',\n        backgroundColor: '#0E073C',\n        overflow: 'hidden',\n    },\n    chat: {\n        backdropFilter: 'blur(10px)',\n    },\n    imageDefault: {\n        WebkitUserSelect: 'none',\n        WebkitUserDrag: 'none',\n    },\n})\nconst socket = io.connect('https://damp-tor-27437.herokuapp.com/', {\n    forceNew: true,\n})\nfunction getRandomColor() {\n    const letters = '0123456789ABCDEF'\n    let color = '#'\n    for (let i = 0; i < 6; i++) {\n        color += letters[Math.floor(Math.random() * 16)]\n    }\n    return color\n}\n\nconst Home = (props) => {\n    const [text, setText] = useState('')\n    const [cordinate, setCordinate] = useState({ x: 0, y: 0 })\n    const [messages, setMessages] = useState([])\n    const colors = [getRandomColor(), getRandomColor(), getRandomColor()]\n    useEffect(() => {\n        console.log('connect to server')\n        socket.emit('joinRoom', {\n            username: props.match.params.id,\n            roomname: 'first',\n        })\n        console.log('HIHI')\n        return () => {\n            console.log('disconnect to server')\n            socket.disconnect()\n        }\n    }, [props.match.params.id])\n    // useEffect(() => {\n    //   socket.emit(\"joinRoom\", {\n    //     username: props.match.params.id,\n    //     roomname: \"first\",\n    //   });\n\n    //   // return () => {\n    //   //   socket.disconnect();\n    //   // };\n    // }, [props.match.params.id]);\n    useEffect(() => {\n        socket.on('message', (data) => {\n            console.log(data)\n            const temp = messages\n            temp.push({\n                userId: data.userId,\n                username: data.username,\n                text: data.text,\n            })\n            setMessages([...temp])\n        })\n        socket.on('hanabi', (data) => {\n            console.log(data)\n            everyonefire(data.cordin, data.color)\n        })\n    }, [socket])\n    const messagesEndRef = useRef(null)\n    const scrollToBottom = () => {\n        if (messagesEndRef.current) {\n            scrollIntoView({\n                behavior: 'smooth',\n                block: 'nearest',\n                inline: 'start',\n            })\n        }\n    }\n\n    const firework = (cordin) => {\n        // fx({\n        //   x: cordin.x,\n        //   y: cordin.y,\n        //   colors: colors,\n        // });\n        socket.emit('firework', { cordin: cordin, colors: colors })\n    }\n    const everyonefire = (cordin, color) => {\n        fx({\n            x: cordin.x,\n            y: cordin.y,\n            colors: color,\n        })\n    }\n\n    useEffect(() => {\n        scrollToBottom()\n    }, [messages])\n    const classes = useStyles()\n    const sendData = () => {\n        if (text !== '') {\n            //   //encrypt the message here\n            const ans = text\n            socket.emit('chat', ans)\n            setText('')\n        }\n    }\n\n    return (\n        <motion.div\n            initial={{ opacity: 0, y: -100 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 1 }}\n            exit={{ opacity: 0, y: -100 }}\n        >\n            <div className={classes.root}>\n                <div\n                    onClick={() => {\n                        console.log('fire')\n                        firework(cordinate)\n                    }}\n                    onMouseMove={(evt) => {\n                        setCordinate({\n                            x: evt.pageX,\n                            y: evt.pageY,\n                        })\n                    }}\n                    style={{\n                        width: '100%',\n                        flex: 1,\n                        overflow: 'hidden',\n                        color: '#FFF',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                    }}\n                >\n                    <img\n                        className={classes.imageDefault}\n                        src={Title}\n                        style={{\n                            filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                        }}\n                        alt=\"img\"\n                    />\n                </div>\n                <img\n                    className={classes.imageDefault}\n                    src={Hana}\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        right: '20%',\n                        width: '15%',\n                        filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                    }}\n                    alt=\"img\"\n                />\n                <img\n                    className={classes.imageDefault}\n                    src={Hana}\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        width: '20%',\n                        right: '45%',\n                        filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                    }}\n                    alt=\"img\"\n                />\n                <img\n                    className={classes.imageDefault}\n                    src={Hana}\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        width: '22%',\n                        right: '30%',\n                        filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                    }}\n                    alt=\"img\"\n                />\n                <img\n                    className={classes.imageDefault}\n                    src={Mise}\n                    style={{\n                        position: 'absolute',\n                        bottom: -15,\n                        width: '22%',\n                        left: 0,\n                        filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                    }}\n                    alt=\"img\"\n                />\n                <img\n                    className={classes.imageDefault}\n                    src={Family}\n                    style={{\n                        position: 'absolute',\n                        bottom: -60,\n                        width: '30%',\n                        right: '50%',\n                        filter: 'drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))',\n                    }}\n                    alt=\"img\"\n                />\n\n                <div\n                    className={classes.chat}\n                    style={{\n                        position: 'absolute',\n                        bottom: 0,\n                        right: 0,\n                        padding: '15px',\n                        color: '#FFF',\n                        backgroundColor: 'rgba(0,0,0,0.4)',\n\n                        borderRadius: '15px',\n                    }}\n                >\n                    <div\n                        style={{\n                            width: '100%',\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                        }}\n                    >\n                        <FilterVintageIcon style={{ margin: '0 1rem' }} />\n                        <h1 style={{ color: 'red', margin: '0' }}>花</h1>\n                        <h1 style={{ color: 'yellow', margin: '0' }}>火</h1>\n                        <h1 style={{ color: 'pink', margin: '0' }}>大</h1>\n                        <h1 style={{ color: 'aqua', margin: '0' }}>会</h1>\n                        <FilterVintageIcon style={{ margin: '0 1rem' }} />\n                    </div>\n                    <hr\n                        style={{\n                            borderColor: 'rgba(255,255,255,0.3)',\n                            lineHeight: '0.3rem',\n                        }}\n                    />\n                    <Scrollbars\n                        autoHide\n                        autoHeight\n                        style={{ width: '100%' }}\n                        renderTrackVertical={({ style, ...props }) => (\n                            <div\n                                {...props}\n                                style={{\n                                    ...style,\n                                    backgroundColor: '#FFF',\n                                    right: '2px',\n                                    bottom: '2px',\n                                    top: '2px',\n                                    borderRadius: '3px',\n                                    width: '5px',\n                                }}\n                            />\n                        )}\n                    >\n                        <div style={{ height: '15rem', width: '30rem' }}>\n                            {messages.map((row) => (\n                                <div\n                                    style={\n                                        row.text ===\n                                        `${row.username} 也加入花火大會了，打聲招呼吧~` ?\n                                            { color: 'orange' } :\n                                            row.text ===\n                                              `${row.username} 離開花火大會 ~` ?\n                                                { color: 'rgba(255,255,255,0.3)' } :\n                                                {}\n                                    }\n                                >\n                                    {row.username} : {row.text}\n                                </div>\n                            ))}\n                            <div ref={messagesEndRef} />\n                        </div>\n                    </Scrollbars>\n                    <div style={{ width: '100%', display: 'flex' }}>\n                        <Input\n                            style={{ color: '#FFF', flex: 1 }}\n                            value={text}\n                            placeholder=\"輸入訊息\"\n                            inputProps={{ 'aria-label': 'description' }}\n                            onChange={(evt) => {\n                                setText(evt.target.value)\n                            }}\n                            onKeyPress={(evt) => {\n                                if (evt.key === 'Enter') {\n                                    sendData()\n                                }\n                            }}\n                        />\n                        <Button\n                            onClick={sendData}\n                            style={{\n                                width: '100px',\n                                marginLeft: '20px',\n                                color: '#FFF',\n                                border: '2px rgba(255,255,255,.2) solid',\n                                marginTop: '20px',\n                            }}\n                        >\n                            傳送\n                        </Button>\n                    </div>\n                </div>\n            </div>\n        </motion.div>\n    )\n}\n\nexport default Home\n"],"sourceRoot":""}