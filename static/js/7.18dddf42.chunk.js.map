{"version":3,"sources":["assets/hana.png","assets/family.png","assets/mise.png","assets/title.png","pages/Hanabi.js"],"names":["useStyles","makeStyles","root","width","height","justifyContent","alignItems","display","flexDirection","backgroundColor","overflow","chat","backdropFilter","getRandomColor","color","i","Math","floor","random","socket","io","connect","Home","props","useState","text","setText","x","y","cordinate","setCordinate","messages","setMessages","colors","useEffect","emit","username","match","params","id","roomname","on","data","console","log","temp","push","userId","everyonefire","cordin","messagesEndRef","useRef","fx","current","scrollIntoView","behavior","scrollToBottom","classes","sendData","ans","motion","div","initial","opacity","animate","transition","duration","exit","className","onClick","onMouseMove","evt","pageX","pageY","style","flex","src","Title","filter","alt","Hana","position","bottom","right","Mise","left","Family","padding","borderRadius","margin","borderColor","lineHeight","map","row","ref","Input","value","placeholder","inputProps","onChange","target","onKeyPress","key","Button","marginLeft","border","marginTop"],"mappings":"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","file":"static/js/7.18dddf42.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/hana.8a690e46.png\";","export default __webpack_public_path__ + \"static/media/family.7c5d7dfd.png\";","export default __webpack_public_path__ + \"static/media/mise.ae36ef33.png\";","export default __webpack_public_path__ + \"static/media/title.bd28112d.png\";","import React, { useState, useEffect, useRef } from \"react\";\r\nimport Hana from \"../assets/hana.png\";\r\nimport Title from \"../assets/title.png\";\r\nimport Family from \"../assets/family.png\";\r\nimport Mise from \"../assets/mise.png\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport { io } from \"socket.io-client\";\r\nimport FilterVintageIcon from \"@material-ui/icons/FilterVintage\";\r\nimport Input from \"@material-ui/core/Input\";\r\nimport fx from \"fireworks\";\r\nimport { motion } from \"framer-motion\";\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: \"100%\",\r\n    height: \"100vh\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    backgroundColor: \"#0E073C\",\r\n    overflow: \"hidden\",\r\n  },\r\n  chat: {\r\n    backdropFilter: \"blur(10px)\",\r\n  },\r\n});\r\n\r\nfunction getRandomColor() {\r\n  var letters = \"0123456789ABCDEF\";\r\n  var color = \"#\";\r\n  for (var i = 0; i < 6; i++) {\r\n    color += letters[Math.floor(Math.random() * 16)];\r\n  }\r\n  return color;\r\n}\r\nconst socket = io.connect(\"https://damp-tor-27437.herokuapp.com/\");\r\n\r\nconst Home = (props) => {\r\n  const [text, setText] = useState(\"\");\r\n  const [cordinate, setCordinate] = useState({ x: 0, y: 0 });\r\n  const [messages, setMessages] = useState([]);\r\n  const colors = [getRandomColor(), getRandomColor(), getRandomColor()];\r\n  useEffect(() => {\r\n    socket.emit(\"joinRoom\", {\r\n      username: props.match.params.id,\r\n      roomname: \"first\",\r\n    });\r\n  }, [props.match.params.id]);\r\n  useEffect(() => {\r\n    socket.on(\"message\", (data) => {\r\n      console.log(data);\r\n      let temp = messages;\r\n      temp.push({\r\n        userId: data.userId,\r\n        username: data.username,\r\n        text: data.text,\r\n      });\r\n      setMessages([...temp]);\r\n    });\r\n    socket.on(\"hanabi\", (data) => {\r\n      console.log(data);\r\n      everyonefire(data.cordin, data.color);\r\n    });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [socket]);\r\n  const messagesEndRef = useRef(null);\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const firework = (cordin) => {\r\n    // fx({\r\n    //   x: cordin.x,\r\n    //   y: cordin.y,\r\n    //   colors: colors,\r\n    // });\r\n    socket.emit(\"firework\", { cordin: cordin, colors: colors });\r\n  };\r\n  const everyonefire = (cordin, color) => {\r\n    fx({\r\n      x: cordin.x,\r\n      y: cordin.y,\r\n      colors: color,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n  const classes = useStyles();\r\n  const sendData = () => {\r\n    if (text !== \"\") {\r\n      //   //encrypt the message here\r\n      const ans = text;\r\n      socket.emit(\"chat\", ans);\r\n      setText(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: -100 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 1 }}\r\n      exit={{ opacity: 0, y: -100 }}\r\n    >\r\n      <div className={classes.root}>\r\n        <div\r\n          onClick={() => {\r\n            console.log(\"fire\");\r\n            firework(cordinate);\r\n          }}\r\n          onMouseMove={(evt) => {\r\n            setCordinate({\r\n              x: evt.pageX,\r\n              y: evt.pageY,\r\n            });\r\n          }}\r\n          style={{\r\n            width: \"100%\",\r\n            flex: 1,\r\n            overflow: \"hidden\",\r\n            color: \"#FFF\",\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <img\r\n            src={Title}\r\n            style={{\r\n              filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n            }}\r\n            alt=\"img\"\r\n          />\r\n        </div>\r\n        <img\r\n          src={Hana}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: \"20%\",\r\n            width: \"15%\",\r\n            filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n          }}\r\n          alt=\"img\"\r\n        />\r\n        <img\r\n          src={Hana}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            width: \"20%\",\r\n            right: \"45%\",\r\n            filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n          }}\r\n          alt=\"img\"\r\n        />\r\n        <img\r\n          src={Hana}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            width: \"22%\",\r\n            right: \"30%\",\r\n            filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n          }}\r\n          alt=\"img\"\r\n        />\r\n        <img\r\n          src={Mise}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: -15,\r\n            width: \"22%\",\r\n            left: 0,\r\n            filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n          }}\r\n          alt=\"img\"\r\n        />\r\n        <img\r\n          src={Family}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: -60,\r\n            width: \"30%\",\r\n            right: \"50%\",\r\n            filter: \"drop-shadow(0px 0px 6px rgba(0, 0, 0, 0.3))\",\r\n          }}\r\n          alt=\"img\"\r\n        />\r\n\r\n        <div\r\n          className={classes.chat}\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: 0,\r\n            right: 0,\r\n            padding: \"15px\",\r\n            color: \"#FFF\",\r\n            backgroundColor: \"rgba(0,0,0,0.4)\",\r\n\r\n            borderRadius: \"15px\",\r\n          }}\r\n        >\r\n          <div\r\n            style={{\r\n              width: \"100%\",\r\n              display: \"flex\",\r\n              alignItems: \"center\",\r\n              justifyContent: \"center\",\r\n            }}\r\n          >\r\n            <FilterVintageIcon style={{ margin: \"0 1rem\" }} />\r\n            <h1 style={{ color: \"red\", margin: \"0\" }}>花</h1>\r\n            <h1 style={{ color: \"yellow\", margin: \"0\" }}>火</h1>\r\n            <h1 style={{ color: \"pink\", margin: \"0\" }}>大</h1>\r\n            <h1 style={{ color: \"aqua\", margin: \"0\" }}>会</h1>\r\n            <FilterVintageIcon style={{ margin: \"0 1rem\" }} />\r\n          </div>\r\n          <hr\r\n            style={{\r\n              borderColor: \"rgba(255,255,255,0.3)\",\r\n              lineHeight: \"0.3rem\",\r\n            }}\r\n          />\r\n          <div style={{ height: \"15rem\", overflow: \"auto\", width: \"30rem\" }}>\r\n            {messages.map((row) => (\r\n              <div\r\n                style={\r\n                  row.text === `${row.username} 也加入花火大會了，打聲招呼吧~`\r\n                    ? { color: \"orange\" }\r\n                    : row.text === `${row.username} 離開花火大會 ~`\r\n                    ? { color: \"rgba(255,255,255,0.3)\" }\r\n                    : {}\r\n                }\r\n              >\r\n                {row.username} : {row.text}\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n          <div style={{ width: \"100%\", display: \"flex\" }}>\r\n            <Input\r\n              style={{ color: \"#FFF\", flex: 1 }}\r\n              value={text}\r\n              placeholder=\"輸入訊息\"\r\n              inputProps={{ \"aria-label\": \"description\" }}\r\n              onChange={(evt) => {\r\n                setText(evt.target.value);\r\n              }}\r\n              onKeyPress={(evt) => {\r\n                if (evt.key === \"Enter\") {\r\n                  sendData();\r\n                }\r\n              }}\r\n            />\r\n            <Button\r\n              onClick={sendData}\r\n              style={{\r\n                width: \"100px\",\r\n                marginLeft: \"20px\",\r\n                color: \"#FFF\",\r\n                border: \"2px rgba(255,255,255,.2) solid\",\r\n                marginTop: \"20px\",\r\n              }}\r\n            >\r\n              傳送\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"],"sourceRoot":""}